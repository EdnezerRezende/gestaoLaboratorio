
<ion-header>

  <ion-navbar>
    <ion-title class="alinharLabel">Pesquisar item do Estoque</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>
  <ion-searchbar *ngIf="!mostrarForm" animated=true placeholder="Pesquisar" (ionInput)="getItems($event)"></ion-searchbar>
  <ion-list sliding="true" >
    <button ion-item detail-push (click)="editarItemEstoque(itemEstoque)" *ngFor="let itemEstoque of itensEstoqueSearch">
      <h2 ><label>Código Produto: </label>{{itemEstoque.produto.codigoProduto | uppercase }}</h2>
      <h4 ><label>Nome: </label>{{itemEstoque.produto.nome | uppercase}}</h4>
      <h4 *ngIf="!mostrarForm"><label>Localização: </label>{{itemEstoque.localEstoque}} / <label>Lote: </label>{{itemEstoque.lote}}</h4>
      <h4 *ngIf="!mostrarForm"><label>Qtd. Utilizado: </label>{{itemEstoque.qtdUtilizado}} / <label>Data Validade: </label>{{itemEstoque.dataValidade | date: 'dd/MM/yyyy'}}</h4>
    </button>
  </ion-list>
  <form (ngSubmit)="atualizarItemEstoque()" *ngIf="mostrarForm" #formulario="ngForm"  >
    <ion-item >
      <ion-label stacked >Local de Armazenamento</ion-label>
      <ion-input [(ngModel)]="itemEstoque.localEstoque" [ngModelOptions]="{standalone: true}" name="localEstoque" type="text"></ion-input>
    </ion-item>
    <ion-item >
      <ion-label stacked >Lote</ion-label>
      <ion-input disabled="true" [(ngModel)]="itemEstoque.lote" [ngModelOptions]="{standalone: true}" name="lote" type="text"></ion-input>
    </ion-item>
    <ion-item >
      <ion-label stacked >Quantidade Utilizado</ion-label>
      <ion-input [(ngModel)]="somarVlrQtd" disabled="true" [ngModelOptions]="{standalone: true}" name="qtdUtilizado" type="text"></ion-input>
    </ion-item>
    <ion-item >
      <ion-label stacked >Data Solicitado</ion-label>
      <ion-input disabled="true" [ngModelOptions]="{standalone: true}" name="dataPedido" [ngModel]="itemEstoque.dataPedido | date:'yyyy-MM-dd'" (ngModelChange)="itemEstoque.dataPedido = $event" type="date"></ion-input>
    </ion-item>
    <ion-item >
      <ion-label stacked >Data de Validade</ion-label>
      <ion-input disabled="true" [ngModelOptions]="{standalone: true}" name="dataValidade" [ngModel]="itemEstoque.dataValidade | date:'yyyy-MM-dd'" (ngModelChange)="itemEstoque.dataValidade = $event" type="date"></ion-input>
    </ion-item>
  </form>
  <ion-fab top right edge *ngIf="mostrarForm">
    <button ion-fab (click)="atualizarItemEstoque()">
      <ion-icon name="send"></ion-icon>
    </button>
  </ion-fab>
</ion-content>
